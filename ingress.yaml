apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: memo-api-ingress
  annotations:
    # --- í•µì‹¬ ì–´ë…¸í…Œì´ì…˜ ---
    alb.ingress.kubernetes.io/scheme: internet-facing
    # ğŸ‘‡ 2ê°•ì—ì„œ ë°œê¸‰ë°›ì€ ACM ì¸ì¦ì„œì˜ ARNì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”!
    alb.ingress.kubernetes.io/certificate-arn: 'arn:aws:acm:ap-northeast-2:423458036718:certificate/03374b79-bffe-4046-9468-c32d5d6abe8f'
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
    alb.ingress.kubernetes.io/ssl-redirect: '443'
spec:
  ingressClassName: alb
  rules:
  # ğŸ‘‡ Route 53ì— ë“±ë¡í•œ (ë˜ëŠ” ë“±ë¡í• ) ë„ë©”ì¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.
  - host: api.gondue.co.kr
    http:
      paths:
      - path: / # ëª¨ë“  ê²½ë¡œ(/) ìš”ì²­ì„ ì²˜ë¦¬
        pathType: Prefix
        backend:
          service:
            # ğŸ‘‡ ì´ Ingressê°€ íŠ¸ë˜í”½ì„ ì „ë‹¬í•  Service ì´ë¦„
            name: memo-api-service
            port:
              # ğŸ‘‡ Serviceì˜ port ë²ˆí˜¸ (Service YAML íŒŒì¼ ì°¸ê³ )
              number: 80